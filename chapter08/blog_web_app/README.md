# blog_web_app


## 사전 지식
### 콜백 함수
- 일정 작업이 완료되면 실행되는 함수
### 웹뷰 위젯
- 프레임워크에 내장된 브라우저를 앱의 네이티브 컴포넌트에 임베딩하는 기능
- 앱에서 웹 브라우저 기능을 구현해주는 기술
- 웹뷰는 네이티브 컴포넌트에 비해 속도가 느리고 애니메이션이 부자연스러움
- 만들어진 웹사이트를 웹뷰를 사용하여 코드 몇 줄로 해당 사이트를 앱에 웹뷰로 탑재해서 앱을 출시할 수 있음
- 결제 모듈을 PG사에서 웹으로 기능을 구현해두었기 때문에 웹뷰를 사용하면 굳이 시간을 추가로 들여 결제 기능을 개발할 필요가 없어짐
- 웹뷰를 구현할 떄 웹유 위젯은 controller 파라미터에 WebViewController 객체를 입력해줘야 함
- 웹뷰 컨트롤러에서 흔히 사용하는 함수
  - setJavascriptMode
    - 웹뷰에서 자바스크립트 실행을 허용할지 여부 결정
  - setBackgroundColor
    - 배경색을 지정할 수 있음
  - loadRequest 
    - 새로운 URL로 이동
  - setNavigationDelegate
    - NavigationDelegate 객체를 입력해야 하며 NavigationDelegate에는 다양한 콜백 함수 존재
      - onProgress: 새로운 페이지를 열어서 로딩이 될 떄마다 실행되는 함수, 매개변수로 로딩의 진행도를 0부터 1사이의 값으로 받을 수 있음
      - onPageStarted: 새로운 페이지로 이동하면 실행되는 콜백 함수, 이동하고 있는 페이지의 URL을 콜백 함수의 매개변수로 입력받음
      - onPageFinished: 새로운 페이지로 이동이 완료되면 실행되는 콜백 함수, 로딩이 완료된 웹페이지의 URL을 매개변수로 입력받음
### 안드로이드와 IOS네이티브 설정
- 플러터 또한 결국 각 네이티브 플렛폼으로 코드가 컴파일되므로 최소한의 네이티브 설정이 필요
- ex) 인터넷 권한과 https 프로토콜에 관한 권한 설정, 카메라, 사진첩, 푸시 권한 등 보안에 민감한 사항이나 하드웨어 접근할 때도 네이티브 설정해야함

## 사전 준비
### pubspec.yaml 설정
- 플러터 프로젝트와 관련된 설정을 하는 파일
- 프로젝트에서 사용할 이미지 및 폰트를 지정하거나 사용할 오픈 소스 프로젝트들을 명시할 때 사용
### 권한 및 네이티브 설정
- 안드로이드 설정
  - 웹뷰를 실행할 때 인터넷 사용을 위해 인터넷 권한 추가
  - android.compileSdkVersion을 33으로 변경 하여 앱을 빌드할 때 사용할 SDK 버전 지정
  - android.defaultConfig.minSdkVersion을 20으로 변경 하여 안드로이드 운영체제의 최소 SDK 버전을 설정
    - webview_fluuter 플러그인은 안드로이드 최소 버전을 20이상으로 설정해야함
  - 현대 웹사이트는 대부분 https 프로토콜을 사용하지만 아직 http를 사용하는 웹사이트도 있기 때문에 안드로이드와 IOS에서 모두 기본적으로 http 사용할 수 없도록 되어 있는데 이 설정을 해제하려면 코드 추가 해야 함
- IOS 설정
  - Info.plist에서도 http 프로토콜을 사용하는 설정 추가
### 프로젝트 초기화
- 프로그래밍에서 폴더와 파일 정리가 매우 중요
- 이번 프로젝트에서는 화면과 관련된 모든 위젯을 screen 폴더에 저장
- 블로그 웹 앱을 실행했을때 가장 먼저 실행되는 홈화면 제작
- 생성자를 const로 지정하여 인스턴스 위젯을 재활용되어 하드웨어 리소스를 적세 사용하게 

## 구현하기
### ensureInitialized() 함수
- 플러터 프로젝트를 실행하는 runApp() 함수는 내부적으로 WidgetsFlutterBinding.ensureInitialized() 함수를 실행
- ensureInitialized() 함수는 플러터 프레임워크가 앱을 실행할 준비가 됐는지 확인하는 역할
- 일반적으로 개발자가 직접 이 함수를 실행할 필요는 없지만 StatelessWidget에서 WebViewController를 프로퍼티로 인스턴화 하려면 직접 실행해야 함
- ensureInitialized() 함수를 직접 실행하지 않고 WebViewController를 정상적으로 인스턴스화 하는 방법은 StatefulWidget의 initState() 함수에서 진행
